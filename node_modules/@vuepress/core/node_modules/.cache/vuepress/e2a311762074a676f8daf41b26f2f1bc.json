{"remainingRequest":"/Users/fengyunan/Downloads/fengyunan/vuepress/node_modules/babel-loader/lib/index.js??ref--3-1!/Users/fengyunan/Downloads/fengyunan/vuepress/node_modules/vuepress-plugin-mailchimp/src/mailchimpSubscribe.js","dependencies":[{"path":"/Users/fengyunan/Downloads/fengyunan/vuepress/node_modules/vuepress-plugin-mailchimp/src/mailchimpSubscribe.js","mtime":1645695101803},{"path":"/Users/fengyunan/Downloads/fengyunan/vuepress/node_modules/cache-loader/dist/cjs.js","mtime":1645695100529},{"path":"/Users/fengyunan/Downloads/fengyunan/vuepress/node_modules/babel-loader/lib/index.js","mtime":1645695100684}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQganNvbnAgZnJvbSAnanNvbnAnOwppbXBvcnQgcXVlcnlTdHJpbmcgZnJvbSAncXVlcnktc3RyaW5nJzsKaW1wb3J0IF9kZWJ1ZyBmcm9tICdkZWJ1Zyc7Cgp2YXIgZGVidWcgPSBfZGVidWcoJ3BsdWdpbi1tYWlsY2hpbXAnKTsKLyoqCiAqIElmIGRldmVsb3BlcnMgbWFrZSBVSSBjdXN0b21penRpb24gYW5kIG9mZmVyIHVzZXJzIGFuIG9wdGlvbiB3aGV0aGVyIHRvIGVuYWJsZS4KICogSXQgd29uJ3QgYmUgYWJsZSB0byBpbXBvcnQgY2xpZW50IGR5bmFtaWMgbW9kdWxlcyBpZiBpdCdzIGRpc2FibGVkLgogKiBVc2UgY29tbW9uSnMgYmVjYXVzZSBkeW5hbWljIGltcG9ydCBjYW5ub3QgYmUgY2F1Z2h0IGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrL3dlYnBhY2svaXNzdWVzLzUzNjAKICovCgoKdmFyIGVuZHBvaW50OwoKdHJ5IHsKICB2YXIgb3B0aW9ucyA9IHJlcXVpcmUoJ0BkeW5hbWljL21haWxjaGltcE9wdGlvbnMnKTsKCiAgZW5kcG9pbnQgPSBvcHRpb25zLmVuZHBvaW50Owp9IGNhdGNoIChlcnJvcikgewogIGRlYnVnKCdGYWlsIHRvIGdldCBvcHRpb25zJywgZXJyb3IubWVzc2FnZSk7Cn0KCnZhciBzdWJzY3JpYmVUb01haWxjaGltcCA9IGZ1bmN0aW9uIGFkZFRvTWFpbGNoaW1wKGVtYWlsLCBmaWVsZHMpIHsKICB2YXIgZW1haWxFbmNvZGVkID0gZW5jb2RlVVJJQ29tcG9uZW50KGVtYWlsKTsKICB2YXIgdXJsID0gZW5kcG9pbnQucmVwbGFjZSgvXC9wb3N0L2csICcvcG9zdC1qc29uJyk7CiAgdmFyIGxpc3RGaWVsZHMgPSBmaWVsZHMgPyAnJicgKyBxdWVyeVN0cmluZy5zdHJpbmdpZnkoZmllbGRzKSA6ICcnOwogIHZhciBxdWVyeVBhcmFtcyA9ICImRU1BSUw9Ii5jb25jYXQoZW1haWxFbmNvZGVkKS5jb25jYXQobGlzdEZpZWxkcyk7CiAgdXJsID0gIiIuY29uY2F0KHVybCkuY29uY2F0KHF1ZXJ5UGFyYW1zKTsKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgcmV0dXJuIGpzb25wKHVybCwgewogICAgICBwYXJhbTogJ2MnLAogICAgICB0aW1lb3V0OiAzNTAwCiAgICB9LCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7CiAgICAgIGlmIChlcnIpIHsKICAgICAgICBkZWJ1ZygnUmVxdWVzdCBmYWlsZWQnLCBlcnIpOwogICAgICAgIHJlamVjdChlcnIpOwogICAgICB9CgogICAgICBpZiAoZGF0YSkgewogICAgICAgIGRlYnVnKCdSZXF1ZXN0IHN1Y2Nlc3MnLCBkYXRhKTsKICAgICAgICByZXNvbHZlKGRhdGEpOwogICAgICB9CiAgICB9KTsKICB9KTsKfTsKCmV4cG9ydCBkZWZhdWx0IHN1YnNjcmliZVRvTWFpbGNoaW1wOw=="},{"version":3,"sources":["/Users/fengyunan/Downloads/fengyunan/vuepress/node_modules/vuepress-plugin-mailchimp/src/mailchimpSubscribe.js"],"names":["jsonp","queryString","_debug","debug","endpoint","options","require","error","message","subscribeToMailchimp","addToMailchimp","email","fields","emailEncoded","encodeURIComponent","url","replace","listFields","stringify","queryParams","Promise","resolve","reject","param","timeout","err","data"],"mappings":";;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,WAAP,MAAwB,cAAxB;AACA,OAAOC,MAAP,MAAmB,OAAnB;;AAEA,IAAMC,KAAK,GAAGD,MAAM,CAAC,kBAAD,CAApB;AAEA;AACA;AACA;AACA;AACA;;;AACA,IAAIE,QAAJ;;AACA,IAAI;AACF,MAAMC,OAAO,GAAGC,OAAO,CAAC,2BAAD,CAAvB;;AACAF,EAAAA,QAAQ,GAAGC,OAAO,CAACD,QAAnB;AACD,CAHD,CAGE,OAAOG,KAAP,EAAc;AACdJ,EAAAA,KAAK,CAAC,qBAAD,EAAwBI,KAAK,CAACC,OAA9B,CAAL;AACD;;AAED,IAAMC,oBAAoB,GAAG,SAASC,cAAT,CAAwBC,KAAxB,EAA+BC,MAA/B,EAAuC;AAClE,MAAMC,YAAY,GAAGC,kBAAkB,CAACH,KAAD,CAAvC;AACA,MAAII,GAAG,GAAGX,QAAQ,CAACY,OAAT,CAAiB,SAAjB,EAA4B,YAA5B,CAAV;AACA,MAAMC,UAAU,GAAGL,MAAM,GAAG,MAAMX,WAAW,CAACiB,SAAZ,CAAsBN,MAAtB,CAAT,GAAyC,EAAlE;AACA,MAAMO,WAAW,oBAAaN,YAAb,SAA4BI,UAA5B,CAAjB;AACAF,EAAAA,GAAG,aAAMA,GAAN,SAAYI,WAAZ,CAAH;AAEA,SAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV;AAAA,WACjBtB,KAAK,CAACe,GAAD,EAAM;AAAEQ,MAAAA,KAAK,EAAE,GAAT;AAAcC,MAAAA,OAAO,EAAE;AAAvB,KAAN,EAAqC,UAACC,GAAD,EAAMC,IAAN,EAAe;AACvD,UAAID,GAAJ,EAAS;AACPtB,QAAAA,KAAK,CAAC,gBAAD,EAAmBsB,GAAnB,CAAL;AACAH,QAAAA,MAAM,CAACG,GAAD,CAAN;AACD;;AACD,UAAIC,IAAJ,EAAU;AACRvB,QAAAA,KAAK,CAAC,iBAAD,EAAoBuB,IAApB,CAAL;AACAL,QAAAA,OAAO,CAACK,IAAD,CAAP;AACD;AACF,KATI,CADY;AAAA,GAAZ,CAAP;AAYD,CAnBD;;AAqBA,eAAejB,oBAAf","sourcesContent":["import jsonp from 'jsonp';\nimport queryString from 'query-string';\nimport _debug from 'debug';\n\nconst debug = _debug('plugin-mailchimp');\n\n/**\n * If developers make UI customiztion and offer users an option whether to enable.\n * It won't be able to import client dynamic modules if it's disabled.\n * Use commonJs because dynamic import cannot be caught https://github.com/webpack/webpack/issues/5360\n */\nlet endpoint;\ntry {\n  const options = require('@dynamic/mailchimpOptions');\n  endpoint = options.endpoint;\n} catch (error) {\n  debug('Fail to get options', error.message);\n}\n\nconst subscribeToMailchimp = function addToMailchimp(email, fields) {\n  const emailEncoded = encodeURIComponent(email);\n  let url = endpoint.replace(/\\/post/g, '/post-json');\n  const listFields = fields ? '&' + queryString.stringify(fields) : '';\n  const queryParams = `&EMAIL=${emailEncoded}${listFields}`;\n  url = `${url}${queryParams}`;\n\n  return new Promise((resolve, reject) =>\n    jsonp(url, { param: 'c', timeout: 3500 }, (err, data) => {\n      if (err) {\n        debug('Request failed', err);\n        reject(err);\n      }\n      if (data) {\n        debug('Request success', data);\n        resolve(data);\n      }\n    })\n  );\n};\n\nexport default subscribeToMailchimp;\n"]}]}